[{"/media/saquib/linux/CMS/client/src/index.js":"1","/media/saquib/linux/CMS/client/src/App.js":"2","/media/saquib/linux/CMS/client/src/context/AuthContext.js":"3","/media/saquib/linux/CMS/client/src/screens/AdminDashboard.js":"4","/media/saquib/linux/CMS/client/src/screens/SignupScreen.js":"5","/media/saquib/linux/CMS/client/src/screens/LoginScreen.js":"6","/media/saquib/linux/CMS/client/src/components/UserList.js":"7","/media/saquib/linux/CMS/client/src/components/AdminDefault.js":"8","/media/saquib/linux/CMS/client/src/components/Sidebar.js":"9","/media/saquib/linux/CMS/client/src/components/AdminLoader.js":"10"},{"size":505,"mtime":1612425592178,"results":"11","hashOfConfig":"12"},{"size":3101,"mtime":1615186525366,"results":"13","hashOfConfig":"12"},{"size":3088,"mtime":1615742765620,"results":"14","hashOfConfig":"12"},{"size":5387,"mtime":1615780457108,"results":"15","hashOfConfig":"12"},{"size":5698,"mtime":1615819896836,"results":"16","hashOfConfig":"12"},{"size":5962,"mtime":1615187222513,"results":"17","hashOfConfig":"12"},{"size":13979,"mtime":1615826529431,"results":"18","hashOfConfig":"12"},{"size":853,"mtime":1613453899742,"results":"19","hashOfConfig":"12"},{"size":1757,"mtime":1613376221469,"results":"20","hashOfConfig":"12"},{"size":392,"mtime":1615746660290,"results":"21","hashOfConfig":"12"},{"filePath":"22","messages":"23","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},"1wajzox",{"filePath":"25","messages":"26","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},{"filePath":"27","messages":"28","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},{"filePath":"29","messages":"30","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},{"filePath":"31","messages":"32","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"33","messages":"34","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"35","usedDeprecatedRules":"24"},{"filePath":"36","messages":"37","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"38","messages":"39","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},{"filePath":"40","messages":"41","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},{"filePath":"42","messages":"43","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},"/media/saquib/linux/CMS/client/src/index.js",[],["44","45"],"/media/saquib/linux/CMS/client/src/App.js",[],"/media/saquib/linux/CMS/client/src/context/AuthContext.js",[],"/media/saquib/linux/CMS/client/src/screens/AdminDashboard.js",[],"/media/saquib/linux/CMS/client/src/screens/SignupScreen.js",["46"],"/media/saquib/linux/CMS/client/src/screens/LoginScreen.js",["47"],"import axios from \"axios\";\nimport React, {useContext, useState, useEffect} from \"react\";\nimport { Link, useHistory, useLocation } from \"react-router-dom\";\nimport { Grid, Header, Form, Segment, Message } from \"semantic-ui-react\";\nimport { AuthContext } from \"../context/AuthContext\";\n\n\nexport default function LoginScreen() {\n\n  const [animateClass, changeAnimateClass] = useState('');\n\n  const {setUser} = useContext(AuthContext);\n\n  const history = useHistory();\n\n  const [formError, setFormError] = useState({});\n\n  const [submitError, setSubmitError] = useState(false);\n\n  const [isFormSubmitting, setFormSubmitting] = useState(false);\n\n  const location = useLocation();\n\n  const {from, message} = location.state || {from: {pathname: \"/\"}, message: null};\n\n  //console.log(from, message)\n\n  const handleSubmit = (e, setUser) =>{\n\n    setSubmitError(null);\n\n    e.preventDefault();\n    let email = e.target.email.value;\n    let password = e.target.password.value;\n    if(!email)\n      setFormError({...formError, email: \"Required!\"});\n    if(!password)\n      setFormError({...formError, password: \"Required!\"});\n    \n    if(email && password){\n\n      setFormSubmitting(true);\n\n      axios.post('http://localhost:5000/log-in', {email, password}, {withCredentials: true})\n\n      // fetch('http://localhost:5000/log-in', {\n      //   headers: {\n      //   \"Content-Type\": \"application/json\",\n\t\t\t//   'Accept': \"application/json\",\n      // },\n      //   method: \"POST\",\n      //   // mode: \"no-cors\",\n      //   cache: \"no-cache\",\n      //   body: JSON.stringify({email, password})\n      // })\n      .then(res=>{\n        \n        if(res.status === 200){\n            return res.data;\n        }else{\n           \n            throw Error('Error fetching data');\n        }\n      })\n      // .then(res=>{\n      //   console.log(res)\n      //   if(res.status===200)\n      //       return res.json();\n      //   else{\n      //       throw Error('Error Fetching data from server.')\n      //   }\n      // })\n      .then(result=>{\n        //console.log(result)\n        //authentication successful\n        if(result.response_status === 1000)\n          {\n            //setting user object for further use\n            setUser(result.user); //setUser from AuthContext\n            \n            //do otherthing....\n            setTimeout(function(){history.push((from.pathname===\"/\")?result.redirect: from.pathname)}, 800)\n          }\n      })\n      .catch(err=>{\n        console.log(err.response);\n        if(err.response.data){\n          if(err.response.data.response_status === 401){\n            setSubmitError(err.response.data.message);\n          }\n        }\n        else{\n          setSubmitError(err.message);\n        }\n        setFormSubmitting(false);\n      });\n    }\n    \n  }\n\n  const handleChange = (e) =>{\n    if(e.target.name === 'email'){\n\n      let regex = /^[^\\s@]+@[^\\s@\\.]+\\.[^\\s@]+$/gi;\n      \n      regex.test(e.target.value)\n        ?setFormError({...formError, email: null})\n        :setFormError({...formError, email: \"Invalid Email\"});\n    }\n    else if(e.target.name === 'password'){\n\n      let regex = /^(?=.*[A-Za-z])(?=.*\\d)(?=.*[@$!%*#?&])[A-Za-z\\d@$!%*#?&]{6,}$/gi;\n\n      regex.test(e.target.value)\n        ?setFormError({...formError, password:null})\n        :setFormError({...formError, password: \"At least one letter, one number and one special character\"});\n    }\n  }\n\n\n  useEffect(()=>{setTimeout(function(){changeAnimateClass('show-component')}, 100)},[]);\n\n  return (\n      <div className={\"signup-form hidden-initial \" + animateClass}>\n      \n      <style>{`\n      body > div,\n      body > div > div,\n      body > div > div > div.login-form {\n        height: 100%;\n      }\n    `}</style>\n      <Grid\n        textAlign=\"center\"\n        style={{ height: \"100%\" }}\n        verticalAlign=\"middle\"\n      >\n        <Grid.Column style={{ maxWidth: 450 }}>\n\n        <Header as=\"p\" color=\"red\" textAlign=\"center\">\n            <br />\n            {message? message: \"\"}\n        </Header>\n\n          <Header as=\"p\" color=\"blue\" textAlign=\"center\">\n            <br />\n            Login\n          </Header>\n          {submitError &&\n          <Message color=\"red\">\n            <Message.Header>\n              {submitError}\n            </Message.Header>\n          </Message>}\n          <Form size=\"large\" onSubmit={(event)=>handleSubmit(event, setUser)} action=\"POST\">\n\n          {/* {formError &&\n            <Message color=\"red\">\n              <Message.Header>Error</Message.Header>\n              \n                <ul style={{paddingLeft: 10, textAlign: \"left\"}}>\n                  {Object.keys(formError).map(key=>{\n                    return (\n                      <li key={key}>{formError[key]}</li>\n                    )\n                  })}\n                </ul>\n            \n            </Message>\n          } */}\n            <Segment stacked>\n              <Form.Input\n                fluid\n                icon=\"user\"\n                iconPosition=\"left\"\n                placeholder=\"Email address\"\n                name=\"email\"\n                label=\"Email Address\"\n                error={formError && formError.email}\n                onChange={handleChange}\n              />\n              <Form.Input\n                fluid\n                icon=\"lock\"\n                iconPosition=\"left\"\n                placeholder=\"Password\"\n                type=\"password\"\n                name=\"password\"\n                error={formError && formError.password}\n                onChange={handleChange}\n              />\n\n\n              <button className={\"ui blue large fluid button \"+(isFormSubmitting?\"loading\":\"\")} type=\"submit\" disabled={isFormSubmitting || !Object.keys(formError).length>0 || (formError.email || formError.password)}>Login</button>\n            </Segment>\n          </Form>\n          <Message>\n            Not registered yet? <Link to=\"/sign-up\"> Register</Link>\n          </Message>\n        </Grid.Column>\n      </Grid>\n    </div>\n  );\n}\n\n\n\n","/media/saquib/linux/CMS/client/src/components/UserList.js",[],"/media/saquib/linux/CMS/client/src/components/AdminDefault.js",[],"/media/saquib/linux/CMS/client/src/components/Sidebar.js",[],"/media/saquib/linux/CMS/client/src/components/AdminLoader.js",[],{"ruleId":"48","replacedBy":"49"},{"ruleId":"50","replacedBy":"51"},{"ruleId":"52","severity":1,"message":"53","line":84,"column":34,"nodeType":"54","messageId":"55","endLine":84,"endColumn":35,"suggestions":"56"},{"ruleId":"52","severity":1,"message":"53","line":104,"column":34,"nodeType":"54","messageId":"55","endLine":104,"endColumn":35,"suggestions":"57"},"no-native-reassign",["58"],"no-negated-in-lhs",["59"],"no-useless-escape","Unnecessary escape character: \\..","Literal","unnecessaryEscape",["60","61"],["62","63"],"no-global-assign","no-unsafe-negation",{"messageId":"64","fix":"65","desc":"66"},{"messageId":"67","fix":"68","desc":"69"},{"messageId":"64","fix":"70","desc":"66"},{"messageId":"67","fix":"71","desc":"69"},"removeEscape",{"range":"72","text":"73"},"Remove the `\\`. This maintains the current functionality.","escapeBackslash",{"range":"74","text":"75"},"Replace the `\\` with `\\\\` to include the actual backslash character.",{"range":"76","text":"73"},{"range":"77","text":"75"},[2358,2359],"",[2358,2358],"\\",[2868,2869],[2868,2868]]